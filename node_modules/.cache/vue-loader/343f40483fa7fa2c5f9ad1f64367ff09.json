{"remainingRequest":"/Users/rongrong/Desktop/代码文件/前端测试项目/vuecli/blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/rongrong/Desktop/代码文件/前端测试项目/vuecli/blog/src/components/Login.vue?vue&type=style&index=0&id=0ef1a2b6&lang=less&scoped=true&","dependencies":[{"path":"/Users/rongrong/Desktop/代码文件/前端测试项目/vuecli/blog/src/components/Login.vue","mtime":1652866620034},{"path":"/Users/rongrong/Desktop/代码文件/前端测试项目/vuecli/blog/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rongrong/Desktop/代码文件/前端测试项目/vuecli/blog/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/rongrong/Desktop/代码文件/前端测试项目/vuecli/blog/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/rongrong/Desktop/代码文件/前端测试项目/vuecli/blog/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rongrong/Desktop/代码文件/前端测试项目/vuecli/blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/rongrong/Desktop/代码文件/前端测试项目/vuecli/blog/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5tYXsKICBiYWNrZ3JvdW5kLWltYWdlOnVybCgnLi4vLi4vcHVibGljL3Rlc3QuanBnJyk7CiAgcGFkZGluZzogMjBweDsKICBoZWlnaHQ6IDEwMDBweDsKICB3aWR0aDogYXV0bzsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7Cn0KLmJkewogIGhlaWdodDogNTAwcHg7CiAgd2lkdGg6IDUwMHB4OwogIGJhY2tncm91bmQ6IHdoaXRlOwogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBib3JkZXItcmFkaXVzOiA2cHg7Cn0KCiNsb2dpbkwgewogIHdpZHRoOiAxMDAlOwogIGJhY2tncm91bmQtY29sb3I6ICMyZDhlZmY7CiAgY29sb3I6ICNkZWRjZGI7CiAgcGFkZGluZzogMTRweCAyMHB4OwogIG1hcmdpbjogOHB4IDA7CiAgYm9yZGVyOiBub25lOwogIGJvcmRlci1yYWRpdXM6IDRweDsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KCiNsb2dpbkw6aG92ZXIgewogIGJhY2tncm91bmQtY29sb3I6ICMxZjI3ZmY7Cn0KZGl2IHsKICBjb2xvcjogIzZhNmQ3MzsKfQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"ma\">\n    <div class=\"bd\">\n      <div>\n        <h1 style=\"padding-bottom: 10px; color:#3d4046;\">阜南农业专项考试</h1>\n        <div>姓名</div>\n        <el-input  v-model=\"username\" placeholder=\"请输入\"></el-input>\n\n        <div>身份证号码</div>\n        <el-input  v-model=\"uid\" placeholder=\"请输入\"></el-input>\n\n        <div>手机号</div>\n        <el-input  v-model=\"mobile\" placeholder=\"请输入\"></el-input>\n\n        <div>\n          <div>验证码</div>\n          <el-input  v-model=\"code\" placeholder=\"请输入\"></el-input>\n        </div>\n        <el-button id='bt' :disabled=\"isDisabled\" style=\"margin-top: 10px\" @click=\"queryMessage()\">{{buttonName}}</el-button>\n        <el-button id=\"loginL\" @click=\"loginLogin\">登录</el-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import request from '../utils/request.ts'\n  import store from '../../store/index'\n  export default {\n    data () {\n      return {\n        username: '',\n        mobile: '',\n        uid: '',\n        code: '',\n        buttonName: '点击发送验证码',\n        CountDown: 60,\n        isDisabled: false\n      }\n    },\n    created () {\n      if (sessionStorage.getItem('CountDownInfo')) {\n        this.CountDown = JSON.parse(\n          sessionStorage.getItem('CountDownInfo')\n        ).CountDown;\n        this.isDisabled = JSON.parse(\n          sessionStorage.getItem('CountDownInfo')\n        ).isDisabled;\n      }\n      if (this.isDisabled) {\n        var timerId = setInterval(() => {\n          this.CountDown--;\n          this.buttonName = this.CountDown + '秒后重试';\n          if (this.CountDown <= 0) {\n            clearInterval(timerId);\n            this.buttonName = '重新发送';\n            this.CountDown = 60;\n            this.isDisabled = false;\n          }\n        }, 1000);\n      }\n      window.addEventListener('beforeunload', () => {\n        sessionStorage.setItem(\n          'CountDownInfo',\n          JSON.stringify({\n            CountDown: this.CountDown,\n            isDisabled: this.isDisabled\n          })\n        )\n      })\n    },\n\n    beforeRouteLeave (to, from, next) {\n      /*\n        to:router 即将要进入的路由对象\n        from:router  当前导航正要离开的路由\n        next()进行管道中的下一个钩子\n        最后要确保调用next方法，否则钩子不会被resolved\n      */\n      sessionStorage.setItem(\n        'CountDownInfo',\n        JSON.stringify({\n          CountDown: this.CountDown,\n          isDisabled: this.isDisabled\n        })\n      );\n      next();\n    },\n\n    methods: {\n\n      queryMessage () {\n        request({\n          method: 'post',\n          url: 'http://49.232.20.84:8080/login/message',\n          data: {\n            username: this.username,\n            mobile: this.mobile,\n            uid: this.uid\n          }\n        }).then(res => {\n          if (res.data.code === 20000) {\n            this.$message({\n              message: '短信发送成功!',\n              type: 'success'\n            });\n            this.isDisabled = true;\n            var timerId = setInterval(() => {\n              this.CountDown--;\n              this.buttonName = this.CountDown + '秒后重试';\n              if (this.CountDown <= 0) {\n                clearInterval(timerId);\n                this.buttonName = '重新发送';\n                this.CountDown = 60;\n                this.isDisabled = false;\n              }\n            }, 1000)\n          } else {\n            this.$message({\n              message: '请检查身份信息!',\n              type: 'warning'\n            })\n          }\n          }\n        )\n      },\n      loginLogin () {\n        request({\n          method: 'post',\n          url: 'http://49.232.20.84:8080/login/login',\n          data: {\n            username: this.username,\n            mobile: this.mobile,\n            uid: this.uid,\n            code: this.code\n          }\n        }).then(res => {\n          if (res.data.code === 20000) {\n            store.commit('setToken', res.data.data.token)\n            this.$router.push('/wait')\n          } else {\n            this.$message({\n              message: '验证码错误!',\n              type: 'warning'\n            })\n          }\n          }\n        )\n      }\n    }\n  }\n</script>\n\n<style lang=\"less\" scoped>\n  .ma{\n    background-image:url('../../public/test.jpg');\n    padding: 20px;\n    height: 1000px;\n    width: auto;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .bd{\n    height: 500px;\n    width: 500px;\n    background: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-radius: 6px;\n  }\n\n  #loginL {\n    width: 100%;\n    background-color: #2d8eff;\n    color: #dedcdb;\n    padding: 14px 20px;\n    margin: 8px 0;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n  }\n\n  #loginL:hover {\n    background-color: #1f27ff;\n  }\n  div {\n    color: #6a6d73;\n  }\n</style>\n"]}]}